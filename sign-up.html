<html>
<head>
    <script type="text/javascript" src="jobmanapi.js"></script>
    <link href="yakoyo.css" rel="stylesheet">
    <title>Welcome to Yakoyo</title>
    <script>  
        </script>
</head>
<body class="embedded-frame">
    <div id="displayPanel">
    <h2 class="content-text-banner no-margin-header">Sign Up</h2>

    <form id="theForm"> 
        <p>
            <label>UserName</label><input id="user" class="signup-input-item">
        </p> 
        <p>
            <label>Password</label><input id="password" class="signup-input-item">
        </p>
        <p>
            <label>Email Address</label><input id="email" class="signup-input-item">
        </p>

        <p class ="sign-up-instruction" >An email will be sent to the address you provided. The email will contain a link for you to click to compelet signup. Please remember your user name and password, you will need it to complete signup.</p>
        <button type="submit">Sign Up</button><br />
    </form> 
</div>

    <script>

        function message(text){
            document.getElementById('displayPanel').innerHTML = '<h2 class="content-text-banner no-margin-header">' + text + '</h2>';
        }


        document.getElementById('theForm').onsubmit = function () {
            var email = document.getElementById('email').value;
            yakoyoBeginSignupWithEmail(document.getElementById('user').value,
                document.getElementById('password').value,
                email, 
                function (data ) { 
                    if(data && !data.isError){
                        message("Email with instructions to complete signup has been sent to " + email);
                    }
                    else{
                        message("Sign up Failed, Please contact customer Service");
                    }
                    
                },
                function (error) { 
                    message("Sign up Failed, Please contact customer Service");
                }
            );
            return false;
        };
    </script>
</body>
</html>